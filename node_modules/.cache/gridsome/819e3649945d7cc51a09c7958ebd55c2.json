{"remainingRequest":"/home/blesy/Desktop/assets/node_modules/babel-loader/lib/index.js??ref--1-1!/home/blesy/Desktop/assets/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/blesy/Desktop/assets/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/blesy/Desktop/assets/src/components/PropertySearchMobile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/blesy/Desktop/assets/src/components/PropertySearchMobile.vue","mtime":1619537673892},{"path":"/home/blesy/Desktop/assets/node_modules/cache-loader/dist/cjs.js","mtime":1619525890957},{"path":"/home/blesy/Desktop/assets/node_modules/babel-loader/lib/index.js","mtime":1619525890949},{"path":"/home/blesy/Desktop/assets/node_modules/cache-loader/dist/cjs.js","mtime":1619525890957},{"path":"/home/blesy/Desktop/assets/node_modules/vue-loader/lib/index.js","mtime":1619525893783}],"contextDependencies":[],"result":["import \"core-js/modules/es.object.from-entries\";\nimport \"core-js/modules/es.object.keys\";\nimport \"core-js/modules/es.object.to-string\";\nimport \"core-js/modules/es.regexp.exec\";\nimport \"core-js/modules/es.string.iterator\";\nimport \"core-js/modules/es.string.split\";\nimport \"core-js/modules/web.dom-collections.iterator\";\nimport \"core-js/modules/web.url\";\nimport _typeof from \"/home/blesy/Desktop/assets/node_modules/@babel/runtime/helpers/esm/typeof\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/blesy/Desktop/assets/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/blesy/Desktop/assets/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { extend, ValidationObserver, ValidationProvider } from 'vee-validate';\nimport { numeric, required } from 'vee-validate/dist/rules';\nimport axios from 'axios';\nimport { getStrapiMedia } from \"~/utils/medias\";\nimport Loading from 'vue-loading-overlay';\nextend('required', _objectSpread(_objectSpread({}, required), {}, {\n  message: 'This field is required'\n}));\nextend('numeric', _objectSpread(_objectSpread({}, numeric), {}, {\n  message: 'Enter a valid phone number'\n}));\nexport default {\n  name: \"PropertySearch\",\n  props: ['page'],\n  mounted: function mounted() {\n    this.pagination.page = this.page;\n    this.activeTab = this.$route.query.category ? this.$route.query.category : 1;\n    this.searchForm = this.getParams();\n    this.getProperty();\n    this.getCompletion();\n    this.getPropertyCategory();\n\n    if (Object.keys(this.$route.query).length) {\n      this.onSubmit();\n    }\n  },\n  components: {\n    ValidationObserver: ValidationObserver,\n    ValidationProvider: ValidationProvider,\n    Loading: Loading\n  },\n  data: function data() {\n    return {\n      searchForm: {\n        location: 0,\n        completion: 0,\n        property: 0\n      },\n      activeTab: 1,\n      projectCompletion: [],\n      propertyType: [],\n      propertyCategory: [],\n      isLoading: false,\n      currentPage: 1,\n      pagination: {\n        \"page\": \"1\",\n        \"per_page\": \"5\",\n        \"next_page\": \"2\"\n      }\n    };\n  },\n  watch: {\n    page: function page(newVal, oldVal) {\n      this.currentPage = newVal;\n      this.onSubmit();\n    }\n  },\n  methods: {\n    getParams: function getParams() {\n      var fullUrl = this.$route.fullPath;\n      var paramsArray = fullUrl.split('?');\n\n      if (typeof paramsArray[1] === 'string') {\n        var urlParams = new URLSearchParams(paramsArray[1]);\n        return Object.fromEntries(urlParams);\n      } else return {\n        location: 0\n      };\n    },\n    getStrapiMedia: getStrapiMedia,\n    searchToggle: function searchToggle(val) {\n      this.activeTab = val;\n    },\n    onSubmit: function onSubmit() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var formData, results, data;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _this.searchForm.category = _this.activeTab;\n\n                if (!(_this.$router.history.current.path === \"/search\" || _this.$router.history.current.path === \"/search/\")) {\n                  _context.next = 20;\n                  break;\n                }\n\n                _this.isLoading = true;\n                formData = JSON.parse(JSON.stringify(_this.searchForm));\n                if (formData.location == 0) delete formData.location;\n                if (formData.completion == 0) delete formData.completion;\n                if (formData.property == 0) delete formData.property;\n                if (formData.category == 0) delete formData.category; // page=4&per_page=5\n\n                if (_this.pagination) formData.page = _this.currentPage;\n                console.log(formData);\n                _context.next = 13;\n                return axios.get(getStrapiMedia('/properties/search'), {\n                  params: formData\n                });\n\n              case 13:\n                results = _context.sent;\n                data = _typeof(results.data) == 'object' ? results.data : [];\n                _this.pagination = _typeof(data.pagination) == 'object' ? data.pagination : {};\n\n                _this.$emit('onSearchResult', _typeof(results.data) == 'object' && _typeof(results.data.data) == 'object' ? data : []);\n\n                _this.isLoading = false;\n                _context.next = 21;\n                break;\n\n              case 20:\n                _this.$router.push({\n                  path: '/search',\n                  query: _this.searchForm\n                });\n\n              case 21:\n                _context.next = 28;\n                break;\n\n              case 23:\n                _context.prev = 23;\n                _context.t0 = _context[\"catch\"](0);\n                _this.isLoading = false;\n                console.log(_context.t0);\n                return _context.abrupt(\"return\", []);\n\n              case 28:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 23]]);\n      }))();\n    },\n    getCompletion: function getCompletion() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var results;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return axios.get(getStrapiMedia('/project-statuses'));\n\n              case 3:\n                results = _context2.sent;\n                // console.log(results.data);\n                _this2.projectCompletion = results.data;\n\n                if (_typeof(_this2.projectCompletion) === 'object') {\n                  _this2.searchForm.completion = _this2.$route.query.completion ? _this2.$route.query.completion : 0;\n                }\n\n                _context2.next = 12;\n                break;\n\n              case 8:\n                _context2.prev = 8;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n                return _context2.abrupt(\"return\", []);\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 8]]);\n      }))();\n    },\n    getProperty: function getProperty() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var results;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return axios.get(getStrapiMedia('/property-types'));\n\n              case 3:\n                results = _context3.sent;\n                // console.log(results.data);\n                _this3.propertyType = results.data;\n                if (_typeof(_this3.propertyType) === 'object') _this3.searchForm.property = _this3.$route.query.property ? _this3.$route.query.property : 0;\n                _context3.next = 12;\n                break;\n\n              case 8:\n                _context3.prev = 8;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(_context3.t0);\n                return _context3.abrupt(\"return\", []);\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 8]]);\n      }))();\n    },\n    getPropertyCategory: function getPropertyCategory() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var results;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return axios.get(getStrapiMedia('/property-statuses'));\n\n              case 3:\n                results = _context4.sent;\n                // console.log(results.data);\n                _this4.propertyCategory = results.data;\n                if (_typeof(_this4.propertyType) === 'object') _this4.searchForm.category = _this4.$route.query.category ? _this4.$route.query.category : 0;\n                _context4.next = 12;\n                break;\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.log(_context4.t0);\n                return _context4.abrupt(\"return\", []);\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 8]]);\n      }))();\n    }\n  }\n};",{"version":3,"sources":["PropertySearchMobile.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"container\">\n    <loading :active.sync=\"isLoading\"\n             :can-cancel=\"false\"\n             loader=\"dots\"\n             color=\"rgb(42, 46, 67)\"\n             :is-full-page=\"true\"></loading>\n\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <div class=\"slider-search\">\n          <ul>\n            <li :class=\"activeTab==cat.id? 'active':''\" @click=\"searchToggle(cat.id)\" v-for=\"(cat,ind) in propertyCategory\">\n              {{ cat.name }}\n            </li>\n          </ul>\n          <ValidationObserver v-slot=\"{ handleSubmit }\">\n\n            <form class=\"search-form buy-searchForm\" action=\"\" @submit.prevent=\"handleSubmit(onSubmit)\">\n              <div class=\"row\">\n                <div class=\"col-md-6 col-5 m-auto\">\n                  <label>Location\n                    <g-image src=\"~/assets/images/dropdown.svg\"/>\n                  </label>\n                </div>\n                <div class=\"col-md-6 col-7\">\n                  <select v-model=\"searchForm.location\">\n                    <option value=\"0\">-Select- </option>\n                    <option value=\"dubai\">Dubai</option>\n                    <option value=\"India\">India</option>\n                    <option value=\"USA\">USA</option>\n                  </select>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col-md-6 col-5 m-auto\">\n                  <label>Completion\n                    <g-image src=\"~/assets/images/dropdown.svg\"/>\n                  </label>\n                </div>\n                <div class=\"col-md-6 col-7\">\n                  <select v-model=\"searchForm.completion\">\n                    <option value=\"0\">-Select-</option>\n                    <option v-for=\"(cmp,ind) in projectCompletion\" :value=\"cmp.id\">{{ cmp.name }}</option>\n                  </select>\n                </div>\n              </div>\n\n              <div class=\"row\">\n                <div class=\"col-md-6 col-5 m-auto\">\n                  <label>Property\n                    <g-image src=\"~/assets/images/dropdown.svg\"/>\n                  </label>\n                </div>\n                <div class=\"col-md-6 col-7\">\n                  <select v-model=\"searchForm.property\">\n                    <option value=\"0\">-Select-</option>\n                    <option v-for=\"(cmp,ind) in propertyType\" :value=\"cmp.id\">{{ cmp.name }}</option>\n                  </select>\n                </div>\n              </div>\n              <!-- <div class=\"row\">\n                <div class=\"col-md-6 col-5\">\n                  <label>Minimum</label>\n                </div>\n                <div class=\"col-md-6 col-7\">\n                  <input type=\"text\" name=\"minimum\" placeholder=\"AED320,000\" v-model=\"searchForm.min_price\"/>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col-md-6 col-5\">\n                  <label>Maximum</label>\n                </div>\n                <div class=\"col-md-6 col-7\">\n                  <input type=\"text\" name=\"maximum\" placeholder=\"AED820,000\" v-model=\"searchForm.max_price\"/>\n                </div>\n              </div> -->\n\n              <div class=\"d-flex flex-column searchBtn\">\n                <input type=\"submit\" value=\"Search\"/>\n              </div>\n            </form>\n          </ValidationObserver>\n\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {extend, ValidationObserver, ValidationProvider} from 'vee-validate';\nimport {numeric, required} from 'vee-validate/dist/rules';\nimport axios from 'axios'\nimport {getStrapiMedia} from \"~/utils/medias\";\nimport Loading from 'vue-loading-overlay';\n\nextend('required', {\n  ...required,\n  message: 'This field is required'\n});\n\nextend('numeric', {\n  ...numeric,\n  message: 'Enter a valid phone number'\n\n});\n\n\nexport default {\n  name: \"PropertySearch\",\n  props:['page'],\n  mounted() {\n    this.pagination.page=this.page\n    this.activeTab = this.$route.query.category ? this.$route.query.category : 1;\n    this.searchForm = this.getParams();\n    this.getProperty();\n    this.getCompletion();\n    this.getPropertyCategory();\n    if (Object.keys(this.$route.query).length) {\n      this.onSubmit();\n    }\n\n  },\n  components: {ValidationObserver, ValidationProvider, Loading},\n  data() {\n    return {\n      searchForm: {location: 0, completion: 0, property: 0},\n      activeTab: 1,\n      projectCompletion: [],\n      propertyType: [],\n      propertyCategory: [],\n\n      isLoading: false,\n      currentPage: 1,\n      pagination: {\n        \"page\": \"1\",\n        \"per_page\": \"5\",\n        \"next_page\": \"2\",\n      },\n\n    }\n  },\n  watch:{\n    page(newVal,oldVal){\n      this.currentPage=newVal;\n      this.onSubmit();\n    }\n  },\n\n  methods: {\n    getParams() {\n      var fullUrl = this.$route.fullPath;\n      var paramsArray = fullUrl.split('?');\n      if (typeof paramsArray[1] === 'string') {\n        const urlParams = new URLSearchParams(paramsArray[1]);\n        return Object.fromEntries(urlParams);\n      } else return {location: 0};\n    },\n    getStrapiMedia,\n    searchToggle(val) {\n\n      this.activeTab = val;\n    },\n    async onSubmit() {\n      try {\n        this.searchForm.category = this.activeTab;\n        if (this.$router.history.current.path === \"/search\" || this.$router.history.current.path === \"/search/\") {\n          this.isLoading = true;\n          var formData = JSON.parse(JSON.stringify(this.searchForm));\n          if (formData.location == 0)\n            delete formData.location;\n          if (formData.completion == 0)\n            delete formData.completion;\n          if (formData.property == 0)\n            delete formData.property;\n          if (formData.category == 0)\n            delete formData.category;\n\n          // page=4&per_page=5\n          if (this.pagination)\n            formData.page = this.currentPage;\n\n          console.log(formData)\n          const results = await axios.get(\n              getStrapiMedia('/properties/search'),\n              {params: formData}\n          );\n          var data = (typeof results.data == 'object' ) ? results.data : [];\n          this.pagination = typeof data.pagination == 'object' ? data.pagination : {};\n\n          this.$emit('onSearchResult', (typeof results.data == 'object' && typeof results.data.data == 'object') ? data : []);\n          this.isLoading = false;\n        } else {\n          this.$router.push({\n            path: '/search',\n            query: this.searchForm\n          })\n        }\n\n      } catch (error) {\n        this.isLoading = false;\n\n        console.log(error);\n        return [];\n      }\n\n    },\n    async getCompletion() {\n      try {\n        const results = await axios.get(\n            getStrapiMedia('/project-statuses')\n        );\n\n        // console.log(results.data);\n        this.projectCompletion = results.data;\n        if (typeof this.projectCompletion === 'object') {\n          this.searchForm.completion = this.$route.query.completion ? this.$route.query.completion : 0\n        }\n      } catch (error) {\n\n        console.log(error);\n        return [];\n      }\n\n    },\n\n    async getProperty() {\n      try {\n        const results = await axios.get(\n            getStrapiMedia('/property-types')\n        );\n\n        // console.log(results.data);\n        this.propertyType = results.data;\n        if (typeof this.propertyType === 'object')\n          this.searchForm.property = this.$route.query.property ? this.$route.query.property : 0\n\n      } catch (error) {\n\n        console.log(error);\n        return [];\n      }\n\n    },\n\n    async getPropertyCategory() {\n      try {\n        const results = await axios.get(\n            getStrapiMedia('/property-statuses')\n        );\n        // console.log(results.data);\n        this.propertyCategory = results.data;\n        if (typeof this.propertyType === 'object')\n          this.searchForm.category = this.$route.query.category ? this.$route.query.category : 0\n\n      } catch (error) {\n\n        console.log(error);\n        return [];\n      }\n\n    },\n\n  }\n}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":"src/components"}]}